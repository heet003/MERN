{"version":3,"file":"static/js/616.310977c4.chunk.js","mappings":"+OA8BA,QA1BA,SAAaA,GACX,IAAI,OAAEC,EAAM,KAAEC,GAASF,EAsBvB,OApBAG,EAAAA,EAAAA,YAAU,KACR,MAAMC,EAAMC,IAAAA,IAAO,CACjBC,IAAKC,mCACLC,UAAW,MACXP,SACAC,KAAM,KAUR,OAPAE,EAAIK,WAAW,IAAIJ,IAAAA,oBACnBD,EAAIK,WAAW,IAAIJ,IAAAA,oBAEnBD,EAAIM,GAAG,QAAQ,MACb,IAAIL,IAAAA,SAAYM,UAAUV,GAAQW,MAAMR,EAAI,IAGvC,KACLA,EAAIS,QAAQ,CACb,GACA,CAACZ,EAAQC,KAELY,EAAAA,EAAAA,KAAA,OAAKC,GAAG,MAAMC,MAAO,CAAEC,MAAO,OAAQC,OAAQ,UACvD,EC0FA,QA1GA,SAAmBlB,GACjB,MAAM,UAAEmB,EAAS,MAAEC,EAAK,YAAEC,EAAW,WAAEC,IAAeC,EAAAA,EAAAA,KAChDC,GAAOC,EAAAA,EAAAA,YAAWC,EAAAA,IACjBC,EAASC,IAAcC,EAAAA,EAAAA,WAAS,IAChCC,EAAkBC,IAAuBF,EAAAA,EAAAA,WAAS,GAMzD,SAASG,IACPJ,GAAW,EACb,CAMA,SAASK,IACPF,GAAoB,EACtB,CAmBA,OACEG,EAAAA,EAAAA,MAACC,EAAAA,SAAc,CAAAC,SAAA,EACbtB,EAAAA,EAAAA,KAACuB,EAAAA,EAAU,CAACjB,MAAOA,EAAOkB,QAAShB,KACnCR,EAAAA,EAAAA,KAACyB,EAAAA,EAAK,CACJC,KAAMb,EACNc,SAAUT,EACVU,OAAQ1C,EAAM2C,QACdC,aAAa,4BACbC,YAAY,4BACZC,QAAQhC,EAAAA,EAAAA,KAACiC,EAAAA,EAAM,CAACC,QAAShB,EAAgBI,SAAC,UAAeA,UAEzDtB,EAAAA,EAAAA,KAAA,OAAKmC,UAAU,gBAAeb,UAC5BtB,EAAAA,EAAAA,KAACoC,EAAG,CAACjD,OAAQD,EAAMmD,YAAajD,KAAM,UAG1CY,EAAAA,EAAAA,KAACyB,EAAAA,EAAK,CACJC,KAAMV,EACNW,SAAUR,EACVS,OAAO,gBACPG,YAAY,4BACZC,QACEZ,EAAAA,EAAAA,MAACC,EAAAA,SAAc,CAAAC,SAAA,EACbtB,EAAAA,EAAAA,KAACiC,EAAAA,EAAM,CAACK,SAAO,EAACJ,QAASf,EAAoBG,SAAC,YAG9CtB,EAAAA,EAAAA,KAACiC,EAAAA,EAAM,CAACM,QAAM,EAACL,QA1CzBM,iBACE,UACQjC,EAAY,GAADkC,OACZhD,iCAA8B,gBAAAgD,OAAevD,EAAMe,IACtD,SACA,KACA,CACEyC,cAAe,UAAYhC,EAAKiC,QAGpCzD,EAAM0D,SAAS1D,EAAMe,GACvB,CAAE,MAAO4C,GACPC,QAAQC,IAAIF,EACd,CACA5B,GAAoB,EACtB,EA2BuDK,SAAC,cAIjDA,UAEDtB,EAAAA,EAAAA,KAAA,KAAAsB,SAAG,qDAELtB,EAAAA,EAAAA,KAAA,MAAImC,UAAU,aAAYb,UACxBF,EAAAA,EAAAA,MAAC4B,EAAAA,EAAI,CAACb,UAAU,sBAAqBb,SAAA,CAClCjB,IAAaL,EAAAA,EAAAA,KAACiD,EAAAA,EAAM,CAACC,WAAS,KAC/BlD,EAAAA,EAAAA,KAAA,OAAKmC,UAAU,oBAAmBb,UAChCtB,EAAAA,EAAAA,KAAA,OACEmD,IAAG,GAAAV,OAAKhD,iCAA8B,KAAAgD,OAAIvD,EAAMkE,OAChDC,IAAKnE,EAAMoE,WAGflC,EAAAA,EAAAA,MAAA,OAAKe,UAAU,mBAAkBb,SAAA,EAC/BtB,EAAAA,EAAAA,KAAA,MAAAsB,SAAKpC,EAAMoE,SACXtD,EAAAA,EAAAA,KAAA,MAAAsB,SAAKpC,EAAM2C,WACX7B,EAAAA,EAAAA,KAAA,KAAAsB,SAAIpC,EAAMqE,kBAEZnC,EAAAA,EAAAA,MAAA,OAAKe,UAAU,sBAAqBb,SAAA,EAClCtB,EAAAA,EAAAA,KAACiC,EAAAA,EAAM,CAACK,SAAO,EAACJ,QAjF1B,WACEpB,GAAW,EACb,EA+EkDQ,SAAC,gBAGxCZ,EAAK8C,SAAWtE,EAAMuE,YACrBzD,EAAAA,EAAAA,KAACiC,EAAAA,EAAM,CAACyB,GAAE,WAAAjB,OAAavD,EAAMe,IAAKqB,SAAC,SAGpCZ,EAAK8C,SAAWtE,EAAMuE,YACrBzD,EAAAA,EAAAA,KAACiC,EAAAA,EAAM,CAACM,QAAM,EAACL,QAjF3B,WACEjB,GAAoB,EACtB,EA+E6DK,SAAC,qBAShE,EC9EA,QA/BA,SAAmBpC,GACjB,OAA2B,IAAvBA,EAAMyE,MAAMC,QAEZ5D,EAAAA,EAAAA,KAAA,OAAKmC,UAAU,oBAAmBb,UAChCF,EAAAA,EAAAA,MAAC4B,EAAAA,EAAI,CAAA1B,SAAA,EACHtB,EAAAA,EAAAA,KAAA,MAAAsB,SAAI,wCACJtB,EAAAA,EAAAA,KAACiC,EAAAA,EAAM,CAACyB,GAAG,cAAapC,SAAC,sBAO/BtB,EAAAA,EAAAA,KAAA,MAAImC,UAAU,aAAYb,SACvBpC,EAAMyE,MAAMrE,KAAKuE,IAChB7D,EAAAA,EAAAA,KAAC8D,EAAS,CAER7D,GAAI4D,EAAM5D,GACVmD,MAAOS,EAAMT,MACbE,MAAOO,EAAMP,MACbC,YAAaM,EAAMN,YACnB1B,QAASgC,EAAMhC,QACf4B,UAAWI,EAAME,QACjB1B,YAAawB,EAAMG,SACnBpB,SAAU1D,EAAM+E,eARXJ,EAAM5D,OAarB,ECUA,QAvCA,WACE,MAAOiE,EAAcC,IAAmBpD,EAAAA,EAAAA,aAClC,UAAEV,EAAS,MAAEC,EAAK,YAAEC,EAAW,WAAEC,IAAeC,EAAAA,EAAAA,KAEhD+C,GAASY,EAAAA,EAAAA,MAAYZ,OAoB3B,OAlBAnE,EAAAA,EAAAA,YAAU,MACRmD,iBACE,IACE,MAAM6B,QAAqB9D,EAAY,GAADkC,OACjChD,iCAA8B,qBAAAgD,OAAoBe,IAEvDW,EAAgBE,EAAaC,OAC/B,CAAE,MAAOzB,GAAM,CACjB,CACA0B,EAAW,GACV,CAAChE,EAAaiD,KASfpC,EAAAA,EAAAA,MAACC,EAAAA,SAAc,CAAAC,SAAA,EACbtB,EAAAA,EAAAA,KAACuB,EAAAA,EAAU,CAACG,KAAMpB,EAAOA,MAAOA,EAAOkB,QAAShB,IAC/CH,IACCL,EAAAA,EAAAA,KAAA,OAAKmC,UAAU,SAAQb,UACrBtB,EAAAA,EAAAA,KAACiD,EAAAA,EAAM,OAGT5C,GAAa6D,IACblE,EAAAA,EAAAA,KAACwE,EAAS,CAACb,MAAOO,EAAcD,cAftC,SAAuBQ,GACrBN,GAAiBO,GACfA,EAAWC,QAAQd,GAAUA,EAAM5D,KAAOwE,KAE9C,MAeF,C,oDCxCA,MAQA,EARavF,IAETc,EAAAA,EAAAA,KAAA,OAAKmC,UAAS,QAAAM,OAAUvD,EAAMiD,WAAajC,MAAOhB,EAAMgB,MAAMoB,SAC3DpC,EAAMoC,U,sECWb,QAbA,SAAoBpC,GAClB,OACEc,EAAAA,EAAAA,KAACyB,EAAAA,EAAK,CACJE,SAAUzC,EAAMsC,QAChBI,OAAO,qBACPF,OAAQxC,EAAMoB,MACd0B,QAAQhC,EAAAA,EAAAA,KAACiC,EAAAA,EAAM,CAACC,QAAShD,EAAMsC,QAAQF,SAAC,SAAcA,UAEtDtB,EAAAA,EAAAA,KAAA,KAAAsB,SAAIpC,EAAMoB,SAGhB,C,6CCdO,SAASG,IACd,MAAOJ,EAAWuE,IAAgB7D,EAAAA,EAAAA,WAAS,IACpCT,EAAOuE,IAAY9D,EAAAA,EAAAA,YAEpB+D,GAAqBC,EAAAA,EAAAA,QAAO,IAE5BxE,GAAcyE,EAAAA,EAAAA,cAClBxC,eAAOyC,GAAoD,IAA/CC,EAAMC,UAAAvB,OAAA,QAAAwB,IAAAD,UAAA,GAAAA,UAAA,GAAG,MAAOE,EAAIF,UAAAvB,OAAA,QAAAwB,IAAAD,UAAA,GAAAA,UAAA,GAAG,KAAMG,EAAOH,UAAAvB,OAAA,QAAAwB,IAAAD,UAAA,GAAAA,UAAA,GAAG,CAAC,EAClDP,GAAa,GACb,MAAMW,EAAgB,IAAIC,gBAC1BV,EAAmBW,QAAQC,KAAKH,GAEhC,IACE,MAAMI,QAAiBC,MAAMX,EAAK,CAChCC,SACAG,OACAC,UACAO,OAAQN,EAAcM,SAElBxB,QAAqBsB,EAASG,OAKpC,GAJAhB,EAAmBW,QAAUX,EAAmBW,QAAQd,QACrDoB,GAAYA,IAAYR,KAGtBI,EAASK,GACZ,MAAM,IAAIC,MAAM5B,EAAa6B,SAI/B,OADAtB,GAAa,GACNP,CACT,CAAE,MAAOxB,GAGP,MAFAgC,EAAShC,EAAIqD,SACbtB,GAAa,GACP/B,CACR,CACF,GACA,IAcF,OAPAxD,EAAAA,EAAAA,YAAU,IACD,KAELyF,EAAmBW,QAAQU,SAASC,GAAcA,EAAUC,SAAQ,GAErE,IAEI,CAAEhG,YAAWC,QAAOC,cAAaC,WAXxC,WACEqE,EAAS,KACX,EAUF,C","sources":["shared/components/UIElements/Map.js","places/components/PlaceItem.js","places/components/PlaceList.js","places/pages/UserPlaces.js","shared/components/UIElements/Card.js","shared/components/UIElements/ErrorModal.js","shared/hooks/http-hook.js"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport tt, { Marker } from \"@tomtom-international/web-sdk-maps\";\nimport \"./Map.css\";\n\nfunction Map(props) {\n  let { center, zoom } = props;\n\n  useEffect(() => {\n    const map = tt.map({\n      key: process.env.REACT_APP_MAP_API,\n      container: \"map\",\n      center,\n      zoom: 10,\n    });\n\n    map.addControl(new tt.FullscreenControl());\n    map.addControl(new tt.NavigationControl());\n\n    map.on(\"load\", () => {\n      new tt.Marker().setLngLat(center).addTo(map);\n    });\n\n    return () => {\n      map.remove();\n    };\n  }, [center, zoom]);\n\n  return <div id=\"map\" style={{ width: \"100%\", height: \"400px\" }}></div>;\n}\n\nexport default Map;\n","import React, { useState, useContext } from \"react\";\nimport Card from \"../../shared/components/UIElements/Card\";\nimport Button from \"../../shared/components/FormElements/Button\";\nimport Modal from \"../../shared/components/UIElements/Modal\";\n// import Map from \"../../shared/components/UIElements/Map\";\nimport ErrorModal from \"../../shared/components/UIElements/ErrorModal\";\nimport Loader from \"../../shared/components/UIElements/LoadingSpinner\";\nimport { AuthContext } from \"../../shared/context/auth-context\";\nimport { useHttpClient } from \"../../shared/hooks/http-hook\";\nimport Map from \"../../shared/components/UIElements/Map\";\nimport \"./PlaceItem.css\";\n\nfunction PlaceItem(props) {\n  const { isLoading, error, sendRequest, clearError } = useHttpClient();\n  const auth = useContext(AuthContext);\n  const [showMap, setShowMap] = useState(false);\n  const [showConfirmModal, setShowConfirmModal] = useState(false);\n\n  function openMapHandler() {\n    setShowMap(true);\n  }\n\n  function closeMapHandler() {\n    setShowMap(false);\n  }\n\n  function showDeleteWarningHandler() {\n    setShowConfirmModal(true);\n  }\n\n  function cancelDeleteHandler() {\n    setShowConfirmModal(false);\n  }\n\n  async function confirmDeleteHandler() {\n    try {\n      await sendRequest(\n        `${process.env.REACT_APP_BASE_URL}/api/places/${props.id}`,\n        \"DELETE\",\n        null,\n        {\n          Authorization: \"Bearer \" + auth.token,\n        }\n      );\n      props.onDelete(props.id);\n    } catch (err) {\n      console.log(err);\n    }\n    setShowConfirmModal(false);\n  }\n\n  return (\n    <React.Fragment>\n      <ErrorModal error={error} onClear={clearError} />\n      <Modal\n        show={showMap}\n        onCancel={closeMapHandler}\n        header={props.address}\n        contentClass=\"place-item__modal-content\"\n        footerClass=\"place-item__modal-actions\"\n        footer={<Button onClick={closeMapHandler}>CLOSE</Button>}\n      >\n        <div className=\"map-container\">\n          <Map center={props.coordinates} zoom={10} />\n        </div>\n      </Modal>\n      <Modal\n        show={showConfirmModal}\n        onCancel={cancelDeleteHandler}\n        header=\"Are you sure?\"\n        footerClass=\"place-item__modal-actions\"\n        footer={\n          <React.Fragment>\n            <Button inverse onClick={cancelDeleteHandler}>\n              CANCEL\n            </Button>\n            <Button danger onClick={confirmDeleteHandler}>\n              DELETE\n            </Button>\n          </React.Fragment>\n        }\n      >\n        <p>Do you want to proceed and delete this place?</p>\n      </Modal>\n      <li className=\"place-item\">\n        <Card className=\"place-item__content\">\n          {isLoading && <Loader asOverlay />}\n          <div className=\"place-item__image\">\n            <img\n              src={`${process.env.REACT_APP_BASE_URL}/${props.image}`}\n              alt={props.title}\n            />\n          </div>\n          <div className=\"place-item__info\">\n            <h2>{props.title}</h2>\n            <h3>{props.address}</h3>\n            <p>{props.description}</p>\n          </div>\n          <div className=\"place-item__actions\">\n            <Button inverse onClick={openMapHandler}>\n              VIEW ON MAP\n            </Button>\n            {auth.userId === props.creatorId && (\n              <Button to={`/places/${props.id}`}>EDIT</Button>\n            )}\n\n            {auth.userId === props.creatorId && (\n              <Button danger onClick={showDeleteWarningHandler}>\n                DELETE\n              </Button>\n            )}\n          </div>\n        </Card>\n      </li>\n    </React.Fragment>\n  );\n}\n\nexport default PlaceItem;\n","import React from \"react\";\n\nimport Card from \"../../shared/components/UIElements/Card\";\nimport PlaceItem from \"./PlaceItem\";\nimport Button from \"../../shared/components/FormElements/Button\";\nimport \"./PlaceList.css\";\n\nfunction PlaceList(props) {\n  if (props.items.length === 0) {\n    return (\n      <div className=\"place-list center\">\n        <Card>\n          <h2>No places found. Maybe create one?</h2>\n          <Button to=\"/places/new\">Share Place</Button>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <ul className=\"place-list\">\n      {props.items.map((place) => (\n        <PlaceItem\n          key={place.id}\n          id={place.id}\n          image={place.image}\n          title={place.title}\n          description={place.description}\n          address={place.address}\n          creatorId={place.creator}\n          coordinates={place.location}\n          onDelete={props.onDeletePlace}\n        />\n      ))}\n    </ul>\n  );\n}\n\nexport default PlaceList;\n","import React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport PlaceList from \"../components/PlaceList\";\nimport ErrorModal from \"../../shared/components/UIElements/ErrorModal\";\nimport Loader from \"../../shared/components/UIElements/LoadingSpinner\";\nimport { useHttpClient } from \"../../shared/hooks/http-hook\";\n\nfunction UserPlaces() {\n  const [loadedPlaces, setLoadedPlaces] = useState();\n  const { isLoading, error, sendRequest, clearError } = useHttpClient();\n\n  const userId = useParams().userId;\n\n  useEffect(() => {\n    async function fetchData() {\n      try {\n        const responseData = await sendRequest(\n          `${process.env.REACT_APP_BASE_URL}/api/places/user/${userId}`\n        );\n        setLoadedPlaces(responseData.places);\n      } catch (err) {}\n    }\n    fetchData();\n  }, [sendRequest, userId]);\n\n  function deleteHandler(deletedPlaceId) {\n    setLoadedPlaces((prevPlaces) =>\n      prevPlaces.filter((place) => place.id !== deletedPlaceId)\n    );\n  }\n\n  return (\n    <React.Fragment>\n      <ErrorModal show={error} error={error} onClear={clearError} />\n      {isLoading && (\n        <div className=\"center\">\n          <Loader />\n        </div>\n      )}\n      {!isLoading && loadedPlaces && (\n        <PlaceList items={loadedPlaces} onDeletePlace={deleteHandler} />\n      )}\n    </React.Fragment>\n  );\n}\n\nexport default UserPlaces;\n","import React from 'react';\n\nimport './Card.css';\n\nconst Card = props => {\n  return (\n    <div className={`card ${props.className}`} style={props.style}>\n      {props.children}\n    </div>\n  );\n};\n\nexport default Card;\n","import React from \"react\";\n\nimport Modal from \"./Modal\";\nimport Button from \"../FormElements/Button\";\n\nfunction ErrorModal(props) {\n  return (\n    <Modal\n      onCancel={props.onClear}\n      header=\"An Error Occurred!\"\n      show={!!props.error}\n      footer={<Button onClick={props.onClear}>Okay</Button>}\n    >\n      <p>{props.error}</p>\n    </Modal>\n  );\n}\n\nexport default ErrorModal;\n","import { useState, useCallback, useRef, useEffect } from \"react\";\n\nexport function useHttpClient() {\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState();\n\n  const activeHttpRequests = useRef([]);\n\n  const sendRequest = useCallback(\n    async (url, method = \"GET\", body = null, headers = {}) => {\n      setIsLoading(true);\n      const httpAbortCtrl = new AbortController();\n      activeHttpRequests.current.push(httpAbortCtrl);\n\n      try {\n        const response = await fetch(url, {\n          method,\n          body,\n          headers,\n          signal: httpAbortCtrl.signal,\n        });\n        const responseData = await response.json();\n        activeHttpRequests.current = activeHttpRequests.current.filter(\n          (reqCtrl) => reqCtrl !== httpAbortCtrl\n        );\n\n        if (!response.ok) {\n          throw new Error(responseData.message);\n        }\n\n        setIsLoading(false);\n        return responseData;\n      } catch (err) {\n        setError(err.message);\n        setIsLoading(false);\n        throw err;\n      }\n    },\n    []\n  );\n\n  function clearError() {\n    setError(null);\n  }\n\n  useEffect(() => {\n    return () => {\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n      activeHttpRequests.current.forEach((abortCtrl) => abortCtrl.abort());\n    };\n  }, []);\n\n  return { isLoading, error, sendRequest, clearError };\n}\n"],"names":["props","center","zoom","useEffect","map","tt","key","process","container","addControl","on","setLngLat","addTo","remove","_jsx","id","style","width","height","isLoading","error","sendRequest","clearError","useHttpClient","auth","useContext","AuthContext","showMap","setShowMap","useState","showConfirmModal","setShowConfirmModal","closeMapHandler","cancelDeleteHandler","_jsxs","React","children","ErrorModal","onClear","Modal","show","onCancel","header","address","contentClass","footerClass","footer","Button","onClick","className","Map","coordinates","inverse","danger","async","concat","Authorization","token","onDelete","err","console","log","Card","Loader","asOverlay","src","image","alt","title","description","userId","creatorId","to","items","length","place","PlaceItem","creator","location","onDeletePlace","loadedPlaces","setLoadedPlaces","useParams","responseData","places","fetchData","PlaceList","deletedPlaceId","prevPlaces","filter","setIsLoading","setError","activeHttpRequests","useRef","useCallback","url","method","arguments","undefined","body","headers","httpAbortCtrl","AbortController","current","push","response","fetch","signal","json","reqCtrl","ok","Error","message","forEach","abortCtrl","abort"],"sourceRoot":""}