"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[616],{616:(e,n,c)=>{c.r(n),c.d(n,{default:()=>C});var r=c(60),t=c(763),s=c(480),o=c(572),a=c(228),l=c(712),i=c(392),d=c(908),h=c(256),u=c(468),m=c.n(u),x=c(496);const j=function(e){let{center:n,zoom:c}=e;return(0,r.useEffect)((()=>{const e=m().map({key:"JpG5mdCtHoplLgthoGE7YucZXElOb6rX",container:"map",center:n,zoom:10});return e.addControl(new(m().FullscreenControl)),e.addControl(new(m().NavigationControl)),e.on("load",(()=>{(new(m().Marker)).setLngLat(n).addTo(e)})),()=>{e.remove()}}),[n,c]),(0,x.jsx)("div",{id:"map",style:{width:"100%",height:"400px"}})};const p=function(e){const{isLoading:n,error:c,sendRequest:t,clearError:u}=(0,h.a)(),m=(0,r.useContext)(d.w),[p,f]=(0,r.useState)(!1),[C,g]=(0,r.useState)(!1);function E(){f(!1)}function w(){g(!1)}return(0,x.jsxs)(r.Fragment,{children:[(0,x.jsx)(l.c,{error:c,onClear:u}),(0,x.jsx)(a.c,{show:p,onCancel:E,header:e.address,contentClass:"place-item__modal-content",footerClass:"place-item__modal-actions",footer:(0,x.jsx)(o.c,{onClick:E,children:"CLOSE"}),children:(0,x.jsx)("div",{className:"map-container",children:(0,x.jsx)(j,{center:e.coordinates,zoom:10})})}),(0,x.jsx)(a.c,{show:C,onCancel:w,header:"Are you sure?",footerClass:"place-item__modal-actions",footer:(0,x.jsxs)(r.Fragment,{children:[(0,x.jsx)(o.c,{inverse:!0,onClick:w,children:"CANCEL"}),(0,x.jsx)(o.c,{danger:!0,onClick:async function(){try{await t("".concat("https://mern-7uth.onrender.com","/api/places/").concat(e.id),"DELETE",null,{Authorization:"Bearer "+m.token}),e.onDelete(e.id)}catch(n){console.log(n)}g(!1)},children:"DELETE"})]}),children:(0,x.jsx)("p",{children:"Do you want to proceed and delete this place?"})}),(0,x.jsx)("li",{className:"place-item",children:(0,x.jsxs)(s.c,{className:"place-item__content",children:[n&&(0,x.jsx)(i.c,{asOverlay:!0}),(0,x.jsx)("div",{className:"place-item__image",children:(0,x.jsx)("img",{src:"".concat("https://mern-7uth.onrender.com","/").concat(e.image),alt:e.title})}),(0,x.jsxs)("div",{className:"place-item__info",children:[(0,x.jsx)("h2",{children:e.title}),(0,x.jsx)("h3",{children:e.address}),(0,x.jsx)("p",{children:e.description})]}),(0,x.jsxs)("div",{className:"place-item__actions",children:[(0,x.jsx)(o.c,{inverse:!0,onClick:function(){f(!0)},children:"VIEW ON MAP"}),m.userId===e.creatorId&&(0,x.jsx)(o.c,{to:"/places/".concat(e.id),children:"EDIT"}),m.userId===e.creatorId&&(0,x.jsx)(o.c,{danger:!0,onClick:function(){g(!0)},children:"DELETE"})]})]})})]})};const f=function(e){return 0===e.items.length?(0,x.jsx)("div",{className:"place-list center",children:(0,x.jsxs)(s.c,{children:[(0,x.jsx)("h2",{children:"No places found. Maybe create one?"}),(0,x.jsx)(o.c,{to:"/places/new",children:"Share Place"})]})}):(0,x.jsx)("ul",{className:"place-list",children:e.items.map((n=>(0,x.jsx)(p,{id:n.id,image:n.image,title:n.title,description:n.description,address:n.address,creatorId:n.creator,coordinates:n.location,onDelete:e.onDeletePlace},n.id)))})};const C=function(){const[e,n]=(0,r.useState)(),{isLoading:c,error:s,sendRequest:o,clearError:a}=(0,h.a)(),d=(0,t.W4)().userId;return(0,r.useEffect)((()=>{!async function(){try{const e=await o("".concat("https://mern-7uth.onrender.com","/api/places/user/").concat(d));n(e.places)}catch(e){}}()}),[o,d]),(0,x.jsxs)(r.Fragment,{children:[(0,x.jsx)(l.c,{show:s,error:s,onClear:a}),c&&(0,x.jsx)("div",{className:"center",children:(0,x.jsx)(i.c,{})}),!c&&e&&(0,x.jsx)(f,{items:e,onDeletePlace:function(e){n((n=>n.filter((n=>n.id!==e))))}})]})}},480:(e,n,c)=>{c.d(n,{c:()=>t});c(60);var r=c(496);const t=e=>(0,r.jsx)("div",{className:"card ".concat(e.className),style:e.style,children:e.children})},712:(e,n,c)=>{c.d(n,{c:()=>o});c(60);var r=c(228),t=c(572),s=c(496);const o=function(e){return(0,s.jsx)(r.c,{onCancel:e.onClear,header:"An Error Occurred!",show:!!e.error,footer:(0,s.jsx)(t.c,{onClick:e.onClear,children:"Okay"}),children:(0,s.jsx)("p",{children:e.error})})}},256:(e,n,c)=>{c.d(n,{a:()=>t});var r=c(60);function t(){const[e,n]=(0,r.useState)(!1),[c,t]=(0,r.useState)(),s=(0,r.useRef)([]),o=(0,r.useCallback)((async function(e){let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};n(!0);const a=new AbortController;s.current.push(a);try{const t=await fetch(e,{method:c,body:r,headers:o,signal:a.signal}),l=await t.json();if(s.current=s.current.filter((e=>e!==a)),!t.ok)throw new Error(l.message);return n(!1),l}catch(l){throw t(l.message),n(!1),l}}),[]);return(0,r.useEffect)((()=>()=>{s.current.forEach((e=>e.abort()))}),[]),{isLoading:e,error:c,sendRequest:o,clearError:function(){t(null)}}}}}]);
//# sourceMappingURL=616.310977c4.chunk.js.map