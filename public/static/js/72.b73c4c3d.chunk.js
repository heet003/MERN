"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[72],{312:(e,t,i)=>{i.r(t),i.d(t,{default:()=>f});var a=i(60),n=i(763),r=i(944),l=i(572),s=i(480),c=i(392),o=i(712),u=i(156),d=i(984),p=i(256),h=i(908),v=(i(516),i(496));const f=function(){const e=(0,a.useContext)(h.w),{isLoading:t,error:i,sendRequest:f,clearError:y}=(0,p.a)(),[m,x]=(0,a.useState)(),V=(0,n.W4)().placeId,C=(0,n.Uz)(),[E,T,j]=(0,d.a)({title:{value:"",isValid:!1},description:{value:"",isValid:!1}},!1);return(0,a.useEffect)((()=>{!async function(){try{const e=await f("".concat("https://mern-7uth.onrender.com","/api/places/").concat(V));x(e.place),j({title:{value:e.place.title,isValid:!0},description:{value:e.place.description,isValid:!0}},!0)}catch(e){}}()}),[f,V,j]),m||i?(0,v.jsxs)(a.Fragment,{children:[t&&(0,v.jsx)(c.c,{asOverlay:!0}),(0,v.jsx)(o.c,{error:i,onClear:y}),!t&&m&&(0,v.jsxs)("form",{className:"place-form",onSubmit:async function(t){t.preventDefault();try{await f("".concat("https://mern-7uth.onrender.com","/api/places/").concat(V),"PATCH",JSON.stringify({title:E.inputs.title.value,description:E.inputs.description.value}),{"Content-Type":"application/json",Authorization:"Bearer "+e.token}),C.push("/"+e.userId+"/places")}catch(i){}},children:[(0,v.jsx)(r.c,{id:"title",element:"input",type:"text",label:"Title",validators:[(0,u.aA)()],errorText:"Please enter a valid title.",onInput:T,initialValue:m.title,initialValid:!0}),(0,v.jsx)(r.c,{id:"description",element:"textarea",label:"Description",validators:[(0,u.ye)(5)],errorText:"Please enter a valid description (min. 5 characters).",onInput:T,initialValue:m.description,initialValid:!0}),(0,v.jsx)(l.c,{type:"submit",disabled:!E.isValid,children:"UPDATE PLACE"})]})]}):(0,v.jsx)("div",{className:"center",children:(0,v.jsx)(s.c,{children:(0,v.jsx)("h2",{children:"Could not find place!"})})})}},944:(e,t,i)=>{i.d(t,{c:()=>s});var a=i(60),n=i(156),r=i(496);function l(e,t){switch(t.type){case"CHANGE":return{...e,value:t.val,isValid:(0,n.q4)(t.val,t.validators)};case"TOUCH":return{...e,isTouched:!0};default:return e}}const s=function(e){const[t,i]=(0,a.useReducer)(l,{value:e.initialValue||"",isTouched:!1,isValid:e.initialValid||!1}),{id:n,onInput:s}=e,{value:c,isValid:o}=t;function u(t){i({type:"CHANGE",val:t.target.value,validators:e.validators})}function d(){i({type:"TOUCH"})}(0,a.useEffect)((()=>{s(n,c,o)}),[n,c,o,s]);const p="input"===e.element?(0,r.jsx)("input",{id:e.id,type:e.type,placeholder:e.placeholder,onChange:u,onBlur:d,value:t.value}):(0,r.jsx)("textarea",{id:e.id,rows:e.rows||3,onChange:u,onBlur:d,value:t.value});return(0,r.jsxs)("div",{className:"form-control ".concat(!t.isValid&&t.isTouched&&"form-control--invalid"),children:[(0,r.jsx)("label",{htmlFor:e.id,children:e.label}),p,!t.isValid&&t.isTouched&&(0,r.jsx)("p",{children:e.errorText})]})}},480:(e,t,i)=>{i.d(t,{c:()=>n});i(60);var a=i(496);const n=e=>(0,a.jsx)("div",{className:"card ".concat(e.className),style:e.style,children:e.children})},712:(e,t,i)=>{i.d(t,{c:()=>l});i(60);var a=i(228),n=i(572),r=i(496);const l=function(e){return(0,r.jsx)(a.c,{onCancel:e.onClear,header:"An Error Occurred!",show:!!e.error,footer:(0,r.jsx)(n.c,{onClick:e.onClear,children:"Okay"}),children:(0,r.jsx)("p",{children:e.error})})}},984:(e,t,i)=>{i.d(t,{a:()=>r});var a=i(60);function n(e,t){switch(t.type){case"INPUT_CHANGE":let i=!0;for(const a in e.inputs)e.inputs[a]&&(i=a===t.inputId?i&&t.isValid:i&&e.inputs[a].isValid);return{...e,inputs:{...e.inputs,[t.inputId]:{value:t.value,isValid:t.isValid}},isValid:i};case"SET_DATA":return{inputs:t.inputs,isValid:t.formIsValid};default:return e}}function r(e,t){const[i,r]=(0,a.useReducer)(n,{inputs:e,isValid:t});return[i,(0,a.useCallback)(((e,t,i)=>{r({type:"INPUT_CHANGE",value:t,isValid:i,inputId:e})}),[]),(0,a.useCallback)(((e,t)=>{r({type:"SET_DATA",inputs:e,formIsValid:t})}),[])]}},256:(e,t,i)=>{i.d(t,{a:()=>n});var a=i(60);function n(){const[e,t]=(0,a.useState)(!1),[i,n]=(0,a.useState)(),r=(0,a.useRef)([]),l=(0,a.useCallback)((async function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t(!0);const s=new AbortController;r.current.push(s);try{const n=await fetch(e,{method:i,body:a,headers:l,signal:s.signal}),c=await n.json();if(r.current=r.current.filter((e=>e!==s)),!n.ok)throw new Error(c.message);return t(!1),c}catch(c){throw n(c.message),t(!1),c}}),[]);return(0,a.useEffect)((()=>()=>{r.current.forEach((e=>e.abort()))}),[]),{isLoading:e,error:i,sendRequest:l,clearError:function(){n(null)}}}},156:(e,t,i)=>{i.d(t,{OQ:()=>o,aA:()=>s,q4:()=>u,ye:()=>c});const a="REQUIRE",n="MINLENGTH",r="MAXLENGTH",l="EMAIL",s=()=>({type:a}),c=e=>({type:n,val:e}),o=()=>({type:l}),u=(e,t)=>{let i=!0;for(const s of t)s.type===a&&(i=i&&e.trim().length>0),s.type===n&&(i=i&&e.trim().length>=s.val),s.type===r&&(i=i&&e.trim().length<=s.val),"MIN"===s.type&&(i=i&&+e>=s.val),"MAX"===s.type&&(i=i&&+e<=s.val),s.type===l&&(i=i&&/^\S+@\S+\.\S+$/.test(e));return i}},516:()=>{}}]);
//# sourceMappingURL=72.b73c4c3d.chunk.js.map