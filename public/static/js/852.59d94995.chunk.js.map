{"version":3,"file":"static/js/852.59d94995.chunk.js","mappings":"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","sources":["places/components/PlaceItem.js","places/components/PlaceList.js","places/pages/UserPlaces.js","shared/components/UIElements/Card.js","shared/components/UIElements/ErrorModal.js","shared/hooks/http-hook.js"],"sourcesContent":["import React, { useState, useContext } from \"react\";\nimport Card from \"../../shared/components/UIElements/Card\";\nimport Button from \"../../shared/components/FormElements/Button\";\nimport Modal from \"../../shared/components/UIElements/Modal\";\n// import Map from \"../../shared/components/UIElements/Map\";\nimport ErrorModal from \"../../shared/components/UIElements/ErrorModal\";\nimport Loader from \"../../shared/components/UIElements/LoadingSpinner\";\nimport { AuthContext } from \"../../shared/context/auth-context\";\nimport { useHttpClient } from \"../../shared/hooks/http-hook\";\nimport \"./PlaceItem.css\";\n\nfunction PlaceItem(props) {\n  const { isLoading, error, sendRequest, clearError } = useHttpClient();\n  const auth = useContext(AuthContext);\n  const [showMap, setShowMap] = useState(false);\n  const [showConfirmModal, setShowConfirmModal] = useState(false);\n\n  function openMapHandler() {\n    setShowMap(true);\n  }\n\n  function closeMapHandler() {\n    setShowMap(false);\n  }\n\n  function showDeleteWarningHandler() {\n    setShowConfirmModal(true);\n  }\n\n  function cancelDeleteHandler() {\n    setShowConfirmModal(false);\n  }\n\n  async function confirmDeleteHandler() {\n    try {\n      await sendRequest(\n        `${process.env.REACT_APP_BASE_URL}/api/places/${props.id}`,\n        \"DELETE\",\n        null,\n        {\n          Authorization: \"Bearer \" + auth.token,\n        }\n      );\n      props.onDelete(props.id);\n    } catch (err) {\n      console.log(err);\n    }\n    setShowConfirmModal(false);\n  }\n\n  return (\n    <React.Fragment>\n      <ErrorModal error={error} onClear={clearError} />\n      <Modal\n        show={showMap}\n        onCancel={closeMapHandler}\n        header={props.address}\n        contentClass=\"place-item__modal-content\"\n        footerClass=\"place-item__modal-actions\"\n        footer={<Button onClick={closeMapHandler}>CLOSE</Button>}\n      >\n        <p>The Map!</p>\n        {/* <div className=\"map-container\">\n          <Map center={props.coordinates} zoom={16} />\n        </div> */}\n      </Modal>\n      <Modal\n        show={showConfirmModal}\n        onCancel={cancelDeleteHandler}\n        header=\"Are you sure?\"\n        footerClass=\"place-item__modal-actions\"\n        footer={\n          <React.Fragment>\n            <Button inverse onClick={cancelDeleteHandler}>\n              CANCEL\n            </Button>\n            <Button danger onClick={confirmDeleteHandler}>\n              DELETE\n            </Button>\n          </React.Fragment>\n        }\n      >\n        <p>Do you want to proceed and delete this place?</p>\n      </Modal>\n      <li className=\"place-item\">\n        <Card className=\"place-item__content\">\n          {isLoading && <Loader asOverlay />}\n          <div className=\"place-item__image\">\n            <img\n              src={`${process.env.REACT_APP_BASE_URL}/${props.image}`}\n              alt={props.title}\n            />\n          </div>\n          <div className=\"place-item__info\">\n            <h2>{props.title}</h2>\n            <h3>{props.address}</h3>\n            <p>{props.description}</p>\n          </div>\n          <div className=\"place-item__actions\">\n            <Button inverse onClick={openMapHandler}>\n              VIEW ON MAP\n            </Button>\n            {auth.userId === props.creatorId && (\n              <Button to={`/places/${props.id}`}>EDIT</Button>\n            )}\n\n            {auth.userId === props.creatorId && (\n              <Button danger onClick={showDeleteWarningHandler}>\n                DELETE\n              </Button>\n            )}\n          </div>\n        </Card>\n      </li>\n    </React.Fragment>\n  );\n}\n\nexport default PlaceItem;\n","import React from \"react\";\n\nimport Card from \"../../shared/components/UIElements/Card\";\nimport PlaceItem from \"./PlaceItem\";\nimport Button from \"../../shared/components/FormElements/Button\";\nimport \"./PlaceList.css\";\n\nfunction PlaceList(props) {\n  if (props.items.length === 0) {\n    return (\n      <div className=\"place-list center\">\n        <Card>\n          <h2>No places found. Maybe create one?</h2>\n          <Button to=\"/places/new\">Share Place</Button>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <ul className=\"place-list\">\n      {props.items.map((place) => (\n        <PlaceItem\n          key={place.id}\n          id={place.id}\n          image={place.image}\n          title={place.title}\n          description={place.description}\n          address={place.address}\n          creatorId={place.creator}\n          coordinates={place.location}\n          onDelete={props.onDeletePlace}\n        />\n      ))}\n    </ul>\n  );\n}\n\nexport default PlaceList;\n","import React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport PlaceList from \"../components/PlaceList\";\nimport ErrorModal from \"../../shared/components/UIElements/ErrorModal\";\nimport Loader from \"../../shared/components/UIElements/LoadingSpinner\";\nimport { useHttpClient } from \"../../shared/hooks/http-hook\";\n\nfunction UserPlaces() {\n  const [loadedPlaces, setLoadedPlaces] = useState();\n  const { isLoading, error, sendRequest, clearError } = useHttpClient();\n\n  const userId = useParams().userId;\n\n  useEffect(() => {\n    async function fetchData() {\n      try {\n        const responseData = await sendRequest(\n          `${process.env.REACT_APP_BASE_URL}/api/places/user/${userId}`\n        );\n        setLoadedPlaces(responseData.places);\n      } catch (err) {}\n    }\n    fetchData();\n  }, [sendRequest, userId]);\n\n  function deleteHandler(deletedPlaceId) {\n    setLoadedPlaces((prevPlaces) =>\n      prevPlaces.filter((place) => place.id !== deletedPlaceId)\n    );\n  }\n\n  return (\n    <React.Fragment>\n      <ErrorModal show={error} error={error} onClear={clearError} />\n      {isLoading && (\n        <div className=\"center\">\n          <Loader />\n        </div>\n      )}\n      {!isLoading && loadedPlaces && (\n        <PlaceList items={loadedPlaces} onDeletePlace={deleteHandler} />\n      )}\n    </React.Fragment>\n  );\n}\n\nexport default UserPlaces;\n","import React from 'react';\n\nimport './Card.css';\n\nconst Card = props => {\n  return (\n    <div className={`card ${props.className}`} style={props.style}>\n      {props.children}\n    </div>\n  );\n};\n\nexport default Card;\n","import React from \"react\";\n\nimport Modal from \"./Modal\";\nimport Button from \"../FormElements/Button\";\n\nfunction ErrorModal(props) {\n  return (\n    <Modal\n      onCancel={props.onClear}\n      header=\"An Error Occurred!\"\n      show={!!props.error}\n      footer={<Button onClick={props.onClear}>Okay</Button>}\n    >\n      <p>{props.error}</p>\n    </Modal>\n  );\n}\n\nexport default ErrorModal;\n","import { useState, useCallback, useRef, useEffect } from \"react\";\n\nexport function useHttpClient() {\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState();\n\n  const activeHttpRequests = useRef([]);\n\n  const sendRequest = useCallback(\n    async (url, method = \"GET\", body = null, headers = {}) => {\n      setIsLoading(true);\n      const httpAbortCtrl = new AbortController();\n      activeHttpRequests.current.push(httpAbortCtrl);\n\n      try {\n        const response = await fetch(url, {\n          method,\n          body,\n          headers,\n          signal: httpAbortCtrl.signal,\n        });\n        const responseData = await response.json();\n        activeHttpRequests.current = activeHttpRequests.current.filter(\n          (reqCtrl) => reqCtrl !== httpAbortCtrl\n        );\n\n        if (!response.ok) {\n          throw new Error(responseData.message);\n        }\n\n        setIsLoading(false);\n        return responseData;\n      } catch (err) {\n        setError(err.message);\n        setIsLoading(false);\n        throw err;\n      }\n    },\n    []\n  );\n\n  function clearError() {\n    setError(null);\n  }\n\n  useEffect(() => {\n    return () => {\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n      activeHttpRequests.current.forEach((abortCtrl) => abortCtrl.abort());\n    };\n  }, []);\n\n  return { isLoading, error, sendRequest, clearError };\n}\n"],"names":["props","isLoading","error","sendRequest","clearError","useHttpClient","auth","useContext","AuthContext","showMap","setShowMap","useState","showConfirmModal","setShowConfirmModal","closeMapHandler","cancelDeleteHandler","_jsxs","React","children","_jsx","ErrorModal","onClear","Modal","show","onCancel","header","address","contentClass","footerClass","footer","Button","onClick","inverse","danger","async","concat","process","id","Authorization","token","onDelete","err","console","log","className","Card","Loader","asOverlay","src","image","alt","title","description","userId","creatorId","to","items","length","map","place","PlaceItem","creator","coordinates","location","onDeletePlace","loadedPlaces","setLoadedPlaces","useParams","useEffect","responseData","places","fetchData","PlaceList","deletedPlaceId","prevPlaces","filter","style","setIsLoading","setError","activeHttpRequests","useRef","useCallback","url","method","arguments","undefined","body","headers","httpAbortCtrl","AbortController","current","push","response","fetch","signal","json","reqCtrl","ok","Error","message","forEach","abortCtrl","abort"],"sourceRoot":""}